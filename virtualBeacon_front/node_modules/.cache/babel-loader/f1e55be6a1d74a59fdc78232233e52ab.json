{"ast":null,"code":"var _jsxFileName = \"/home/indien/personal_beacon/VirtualBeacon_front/src/components/PasswordReset.js\";\nimport React from 'react';\nimport { Redirect } from 'react-router-dom';\nimport axios from 'axios';\nimport './style/CardForm.css';\n\nclass PasswordReset extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      email: null,\n      password: null,\n      password_confirmation: null,\n      token: null,\n      validReset: false\n    };\n\n    this.handleChange = e => {\n      const value = e.target.value;\n      this.setState({ ...this.state,\n        [e.target.name]: value\n      });\n    };\n\n    this.handleSubmit = e => {\n      if (this.state.password === this.state.password_confirmation) {\n        axios.post(\"http://ec2-18-218-63-27.us-east-2.compute.amazonaws.com:443/api/password/reset\", {\n          email: this.state.email,\n          password: this.state.password,\n          password_confirmation: this.state.password_confirmation,\n          token: this.state.token\n        }).then(result => {\n          if (result.status === 200) {\n            this.props.alert(\"Réinitialisé\");\n            this.setState({\n              validReset: true\n            });\n          } else {\n            this.props.alert(\"Erreur\");\n          }\n        }).catch(e => {\n          this.props.alert(\"Erreur\");\n        });\n        e.preventDefault();\n      } else {\n        this.props.alert(\"Erreur mot de passe\");\n      }\n    };\n\n    this.componentDidMount = () => {\n      const queryString = window.location.search;\n      const urlParams = new URLSearchParams(queryString);\n      const token = urlParams.get('token');\n      this.setState({\n        token: token\n      });\n    };\n  }\n\n  render() {\n    if (this.state.validReset) {\n      return /*#__PURE__*/React.createElement(Redirect, {\n        to: \"/\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 11\n        }\n      });\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        display: 'flex',\n        flexDirection: 'column'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 4\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"CardForm-Container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(\"h3\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 6\n      }\n    }, \"R\\xE9initialisation mot de passe\"), /*#__PURE__*/React.createElement(\"form\", {\n      className: \"CardForm-Login\",\n      onSubmit: this.handleSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 6\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      for: \"email\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 7\n      }\n    }, \"adresse email\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"email\",\n      name: \"email\",\n      id: \"email\",\n      placeholder: \"adresse email\",\n      onChange: this.handleChange,\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 7\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      for: \"password\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 7\n      }\n    }, \"mot de passe\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"password\",\n      name: \"password\",\n      id: \"password\",\n      placeholder: \"mot de passe\",\n      onChange: this.handleChange,\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 7\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      for: \"password_c\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 7\n      }\n    }, \"confirmation mot de passe\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"password\",\n      name: \"password_confirmation\",\n      id: \"password_confirmation\",\n      placeholder: \" confirmation mot de passe\",\n      onChange: this.handleChange,\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 7\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"submit\",\n      value: \"REINITIALISATION\",\n      className: \"Cardform-submit\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 7\n      }\n    }))));\n  }\n\n}\n\nexport default PasswordReset;","map":{"version":3,"sources":["/home/indien/personal_beacon/VirtualBeacon_front/src/components/PasswordReset.js"],"names":["React","Redirect","axios","PasswordReset","Component","state","email","password","password_confirmation","token","validReset","handleChange","e","value","target","setState","name","handleSubmit","post","then","result","status","props","alert","catch","preventDefault","componentDidMount","queryString","window","location","search","urlParams","URLSearchParams","get","render","display","flexDirection"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { Redirect } from 'react-router-dom';\n\nimport axios from 'axios';\n\nimport './style/CardForm.css';\n\nclass PasswordReset extends React.Component {\n\tstate = {\n\t\temail: null,\n\t\tpassword: null,\n\t\tpassword_confirmation: null,\n\t\ttoken: null,\n\t\tvalidReset: false,\n\t}\n\n\thandleChange = (e) => {\n\t\tconst value = e.target.value\n\t\tthis.setState({ ...this.state, [e.target.name]: value })\n\t}\n\n\thandleSubmit = (e) => {\n\t\tif (this.state.password === this.state.password_confirmation) {\n\t\t\taxios.post(\"http://ec2-18-218-63-27.us-east-2.compute.amazonaws.com:443/api/password/reset\", {\n\t\t\t\temail: this.state.email,\n\t\t\t\tpassword: this.state.password,\n\t\t\t\tpassword_confirmation: this.state.password_confirmation,\n\t\t\t\ttoken: this.state.token,\n\t\t\t}).then(result => {\n\t\t\t\tif (result.status === 200) {\n\t\t\t\t\tthis.props.alert(\"Réinitialisé\")\n\t\t\t\t\tthis.setState({ validReset: true })\n\t\t\t\t} else {\n\t\t\t\t\tthis.props.alert(\"Erreur\")\n\t\t\t\t}\n\t\t\t}).catch(e => {\n\t\t\t\tthis.props.alert(\"Erreur\")\n\t\t\t});\n\t\t\te.preventDefault()\n\t\t} else {\n\t\t\tthis.props.alert(\"Erreur mot de passe\")\n\t\t}\n\t}\n\n\tcomponentDidMount = () => {\n\t\tconst queryString = window.location.search;\n\t\tconst urlParams = new URLSearchParams(queryString);\n\t\tconst token = urlParams.get('token');\n\t\tthis.setState({ token: token });\n\t}\n\n\trender() {\n\t\tif (this.state.validReset) {\n\t\t\treturn <Redirect to=\"/\" />\n\t\t}\n\t\treturn (\n\t\t\t<div style={{ display: 'flex', flexDirection: 'column' }}>\n\t\t\t\t<div className=\"CardForm-Container\">\n\t\t\t\t\t<h3>Réinitialisation mot de passe</h3>\n\t\t\t\t\t<form className=\"CardForm-Login\" onSubmit={this.handleSubmit}>\n\t\t\t\t\t\t<label for=\"email\">adresse email</label>\n\t\t\t\t\t\t<input type=\"email\" name=\"email\" id=\"email\" placeholder=\"adresse email\" onChange={this.handleChange} required />\n\t\t\t\t\t\t<label for=\"password\">mot de passe</label>\n\t\t\t\t\t\t<input type=\"password\" name=\"password\" id=\"password\" placeholder=\"mot de passe\" onChange={this.handleChange} required />\n\t\t\t\t\t\t<label for=\"password_c\">confirmation mot de passe</label>\n\t\t\t\t\t\t<input type=\"password\" name=\"password_confirmation\" id=\"password_confirmation\" placeholder=\" confirmation mot de passe\" onChange={this.handleChange} required />\n\t\t\t\t\t\t<input type=\"submit\" value=\"REINITIALISATION\" className=\"Cardform-submit\" />\n\t\t\t\t\t</form>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default PasswordReset;\n"]},"metadata":{},"sourceType":"module"}