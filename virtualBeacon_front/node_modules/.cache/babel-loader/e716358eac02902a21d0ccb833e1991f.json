{"ast":null,"code":"var _jsxFileName = \"/home/indien/personal_beacon/VirtualBeacon_front/src/screens/Dashboard.js\";\nimport React from 'react';\nimport { BrowserRouter as Router, Switch, Route, Redirect } from 'react-router-dom';\nimport axios from 'axios';\nimport './style/Dashboard.css';\nimport DashboardMenu from '../components/DashboardMenu';\nimport DashboardSearch from '../components/DashboardSearch';\nimport DashboardMap from '../components/DashboardMap';\nimport DashboardInfo from '../components/DashboardInfo';\nimport Stats from '../components/Stats';\n\nclass Dashboard extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      isError: false,\n      items: [],\n      itemIndex: null,\n      fromAddressBar: null,\n      displayMobileInfo: false,\n      activities: null\n    };\n\n    this.displayReturn = () => {\n      this.setState({\n        displayMobileInfo: false\n      });\n    };\n\n    this.componentDidMount = () => {\n      const token = this.props.giveToken;\n      const config = {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      };\n      axios.get(\"http://ec2-18-218-63-27.us-east-2.compute.amazonaws.com:443/api/places\", config).then(result => {\n        if (result.status === 200) {\n          const items = result.data;\n          this.setState({\n            items: items\n          });\n        } else {\n          this.setState({\n            isError: true\n          });\n        }\n      }).catch(e => {\n        this.setState({\n          isError: true\n        });\n      });\n    };\n\n    this.addItem = item => {\n      /*this.setState({\n      \titems: [...this.state.items, item]\n      })*/\n      this.componentDidMount();\n    };\n\n    this.removeItem = id => {\n      /*const idElement = id\n      const refreshItems = this.state.items.filter(item => item.id !== idElement)\n      this.setState({ items: refreshItems })\n      console.log(id)*/\n      this.componentDidMount();\n    };\n\n    this.updateItem = id => {\n      this.componentDidMount();\n    };\n\n    this.getItemIndex = id => {\n      this.setState({\n        itemIndex: id\n      });\n    };\n\n    this.getAddress = (lat, lon) => {\n      console.log(lat, lon);\n      this.setState({\n        fromAddressBar: [lat, lon]\n      });\n    };\n\n    this.getTokenError = () => {\n      this.setState({\n        isError: true\n      });\n    };\n  }\n\n  render() {\n    if (this.state.isError) {\n      return /*#__PURE__*/React.createElement(Redirect, {\n        to: \"/\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 11\n        }\n      });\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"Dashboard\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 4\n      }\n    }, /*#__PURE__*/React.createElement(DashboardInfo, {\n      items: this.state.items,\n      giveIndex: this.state.itemIndex,\n      displayMobileInfo: this.state.displayMobileInfo,\n      displayReturn: this.displayReturn,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 5\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"Dashboard-right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(Router, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 6\n      }\n    }, /*#__PURE__*/React.createElement(DashboardMenu, {\n      getTokenError: this.getTokenError,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 7\n      }\n    }), /*#__PURE__*/React.createElement(Switch, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Route, {\n      path: \"/dashboard/stats\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 8\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"Dashboard-right-stats-header\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 9\n      }\n    }, \"Total activations sur 7 jours :\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"Stats-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Stats, {\n      giveToken: this.props.giveToken,\n      getActivities: this.getActivities,\n      getTokenError: this.getTokenError,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 10\n      }\n    }))), /*#__PURE__*/React.createElement(Route, {\n      path: \"/dashboard\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 8\n      }\n    }, /*#__PURE__*/React.createElement(DashboardSearch, {\n      getAddress: this.getAddress,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(DashboardMap, {\n      items: this.state.items,\n      giveToken: this.props.giveToken,\n      addItem: this.addItem,\n      updateItem: this.updateItem,\n      removeItem: this.removeItem,\n      getItemIndex: this.getItemIndex,\n      fromAddressBar: this.state.fromAddressBar,\n      displayReturn: this.displayReturn,\n      alert: this.props.alert,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 9\n      }\n    }), this.state.displayMobileInfo ? '' : /*#__PURE__*/React.createElement(\"button\", {\n      className: \"Dashboard-display-info\",\n      onClick: () => this.setState({\n        displayMobileInfo: true\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 10\n      }\n    }, \"+\"))))));\n  }\n\n}\n\nexport default Dashboard;","map":{"version":3,"sources":["/home/indien/personal_beacon/VirtualBeacon_front/src/screens/Dashboard.js"],"names":["React","BrowserRouter","Router","Switch","Route","Redirect","axios","DashboardMenu","DashboardSearch","DashboardMap","DashboardInfo","Stats","Dashboard","Component","state","isError","items","itemIndex","fromAddressBar","displayMobileInfo","activities","displayReturn","setState","componentDidMount","token","props","giveToken","config","headers","Authorization","get","then","result","status","data","catch","e","addItem","item","removeItem","id","updateItem","getItemIndex","getAddress","lat","lon","console","log","getTokenError","render","getActivities","alert"],"mappings":"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","sourcesContent":["import React from 'react';\nimport {\n\tBrowserRouter as Router,\n\tSwitch,\n\tRoute,\n\tRedirect\n} from 'react-router-dom';\n\nimport axios from 'axios';\n\nimport './style/Dashboard.css';\n\nimport DashboardMenu from '../components/DashboardMenu';\nimport DashboardSearch from '../components/DashboardSearch';\nimport DashboardMap from '../components/DashboardMap';\nimport DashboardInfo from '../components/DashboardInfo';\nimport Stats from '../components/Stats';\n\nclass Dashboard extends React.Component {\n\n\tstate = {\n\t\tisError: false,\n\t\titems: [],\n\t\titemIndex: null,\n\t\tfromAddressBar: null,\n\t\tdisplayMobileInfo: false,\n\t\tactivities: null,\n\t}\n\n\tdisplayReturn = () => {\n\t\tthis.setState({ displayMobileInfo: false })\n\t}\n\n\tcomponentDidMount = () => {\n\t\tconst token = this.props.giveToken\n\t\tconst config = {\n\t\t\theaders: { Authorization: `Bearer ${token}` }\n\t\t}\n\t\taxios.get(\"http://ec2-18-218-63-27.us-east-2.compute.amazonaws.com:443/api/places\", config\n\t\t)\n\t\t\t.then(result => {\n\t\t\t\tif (result.status === 200) {\n\t\t\t\t\tconst items = result.data\n\t\t\t\t\tthis.setState({ items: items })\n\t\t\t\t} else {\n\t\t\t\t\tthis.setState({ isError: true })\n\t\t\t\t}\n\t\t\t}).catch(e => {\n\t\t\t\tthis.setState({ isError: true })\n\t\t\t});\n\t}\n\n\taddItem = (item) => {\n\t\t/*this.setState({\n\t\t\titems: [...this.state.items, item]\n\t\t})*/\n\t\tthis.componentDidMount()\n\t}\n\n\tremoveItem = (id) => {\n\t\t/*const idElement = id\n\t\tconst refreshItems = this.state.items.filter(item => item.id !== idElement)\n\t\tthis.setState({ items: refreshItems })\n\t\tconsole.log(id)*/\n\t\tthis.componentDidMount()\n\t}\n\n\tupdateItem = (id) => {\n\t\tthis.componentDidMount()\n\t}\n\n\tgetItemIndex = (id) => {\n\t\tthis.setState({ itemIndex: id })\n\t}\n\n\tgetAddress = (lat, lon) => {\n\t\tconsole.log(lat, lon)\n\t\tthis.setState({ fromAddressBar: [lat, lon] })\n\t}\n\n\tgetTokenError = () => {\n\t\tthis.setState({ isError: true })\n\t}\n\n\trender() {\n\t\tif (this.state.isError) {\n\t\t\treturn <Redirect to=\"/\" />;\n\t\t}\n\n\t\treturn (\n\t\t\t<div className=\"Dashboard\">\n\t\t\t\t<DashboardInfo items={this.state.items} giveIndex={this.state.itemIndex} displayMobileInfo={this.state.displayMobileInfo} displayReturn={this.displayReturn} />\n\t\t\t\t<div className=\"Dashboard-right\">\n\t\t\t\t\t<Router>\n\t\t\t\t\t\t<DashboardMenu getTokenError={this.getTokenError} />\n\t\t\t\t\t\t<Switch>\n\t\t\t\t\t\t\t<Route path=\"/dashboard/stats\">\n\t\t\t\t\t\t\t\t<div className=\"Dashboard-right-stats-header\">Total activations sur 7 jours :</div>\n\t\t\t\t\t\t\t\t<div className=\"Stats-container\">\n\t\t\t\t\t\t\t\t\t<Stats giveToken={this.props.giveToken} getActivities={this.getActivities} getTokenError={this.getTokenError} />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</Route>\n\t\t\t\t\t\t\t<Route path=\"/dashboard\">\n\t\t\t\t\t\t\t\t<DashboardSearch getAddress={this.getAddress} />\n\t\t\t\t\t\t\t\t<DashboardMap\n\t\t\t\t\t\t\t\t\titems={this.state.items}\n\t\t\t\t\t\t\t\t\tgiveToken={this.props.giveToken}\n\t\t\t\t\t\t\t\t\taddItem={this.addItem}\n\t\t\t\t\t\t\t\t\tupdateItem={this.updateItem}\n\t\t\t\t\t\t\t\t\tremoveItem={this.removeItem}\n\t\t\t\t\t\t\t\t\tgetItemIndex={this.getItemIndex}\n\t\t\t\t\t\t\t\t\tfromAddressBar={this.state.fromAddressBar}\n\t\t\t\t\t\t\t\t\tdisplayReturn={this.displayReturn}\n\t\t\t\t\t\t\t\t\talert={this.props.alert}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t{this.state.displayMobileInfo ?\n\t\t\t\t\t\t\t\t\t''\n\t\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t\t<button className=\"Dashboard-display-info\" onClick={() => this.setState({ displayMobileInfo: true })}>+</button>\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t</Route>\n\t\t\t\t\t\t</Switch>\n\t\t\t\t\t</Router>\n\t\t\t\t</div>\n\t\t\t</div >\n\t\t);\n\t}\n}\n\nexport default Dashboard;\n"]},"metadata":{},"sourceType":"module"}