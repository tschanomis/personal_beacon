{"ast":null,"code":"var _jsxFileName = \"/home/indien/personal_beacon/VirtualBeacon_front/src/components/Leaflet.js\";\nimport React from \"react\";\nimport { Map, Marker, Popup, TileLayer } from \"react-leaflet\";\nimport axios from 'axios';\nimport './style/Leaflet.css';\n\nclass Leaflet extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      center: [48.854730, 2.346803],\n      zoom: 14,\n      activePark: null,\n      new: null,\n      modifyPopup: false,\n      savePopup: false,\n      newName: null,\n      newDescription: null,\n      modifyName: null,\n      modifyDescription: null\n    };\n\n    this.addMarker = e => {\n      this.props.displayReturn();\n      const zoomValue = this.map && this.map.leafletElement.getZoom();\n      this.setState({\n        zoom: zoomValue\n      });\n      this.setState({\n        new: [e.latlng.lat, e.latlng.lng]\n      });\n      this.setState({\n        center: [e.latlng.lat, e.latlng.lng]\n      });\n    };\n\n    this.modifyMarker = e => {\n      this.setState({\n        modifyPopup: true\n      });\n      this.setState({\n        modifyName: this.state.activePark.name\n      });\n      this.setState({\n        modifyDescription: this.state.activePark.description\n      });\n    };\n\n    this.saveMarker = e => {\n      this.setState({\n        savePopup: true\n      });\n    };\n\n    this.handleChange = e => {\n      const value = e.target.value;\n      this.setState({ ...this.state,\n        [e.target.name]: value\n      });\n    };\n\n    this.handleSubmit = e => {\n      e.preventDefault();\n      const config = {\n        headers: {\n          Authorization: `Bearer ${this.props.giveToken}`\n        }\n      };\n      const bodyParameters = {\n        lat: this.state.new[0],\n        lon: this.state.new[1],\n        name: this.state.newName,\n        description: this.state.newDescription,\n        user_id: 1\n      };\n      axios.post(\"http://ec2-18-218-63-27.us-east-2.compute.amazonaws.com:443/api/places/create/position\", bodyParameters, config).then(result => {\n        if (result.status === 200) {\n          this.props.addItem(bodyParameters);\n          this.setState({\n            savePopup: false,\n            new: null\n          });\n          this.props.alert(\"Balise ajoutée\");\n        } else {\n          this.props.alert(\"Erreur ajout\");\n        }\n      }).catch(e => {\n        this.props.alert(\"Erreur ajout\");\n      });\n    };\n\n    this.handleModify = e => {\n      e.preventDefault();\n      const config = {\n        headers: {\n          Authorization: `Bearer ${this.props.giveToken}`\n        }\n      };\n      const bodyParameters = {\n        name: this.state.modifyName,\n        description: this.state.modifyDescription,\n        id: this.state.activePark.id\n      };\n      axios.put(\"http://ec2-18-218-63-27.us-east-2.compute.amazonaws.com:443/api/places/position\", bodyParameters, config).then(result => {\n        if (result.status === 200) {\n          this.setState({\n            modifyPopup: false,\n            activePark: null\n          });\n          this.props.getItemIndex(null);\n          this.props.updateItem();\n          this.props.alert(\"Modification effectuée\");\n        } else {\n          this.props.alert(\"Erreur modification\");\n        }\n      }).catch(e => {\n        this.props.alert(\"Erreur modification\");\n      });\n    };\n\n    this.handleDelete = e => {\n      e.preventDefault();\n      const id = this.state.activePark.id;\n      const config = {\n        headers: {\n          Authorization: `Bearer ${this.props.giveToken}`\n        }\n      };\n      axios.delete(`http://ec2-18-218-63-27.us-east-2.compute.amazonaws.com:443/api/places/delete/${id}`, config).then(result => {\n        if (result.status === 204) {\n          this.setState({\n            modifyPopup: false,\n            activePark: null\n          });\n          this.props.getItemIndex(null);\n          this.props.removeItem(id);\n          this.props.alert(\"Suppression effectuée\");\n        } else {\n          this.props.alert(\"Erreur suppression\");\n        }\n      }).catch(e => {\n        this.props.alert(\"Erreur suppression\");\n      });\n    };\n  }\n\n  componentDidUpdate(prevProps) {\n    // Utilisation classique (pensez bien à comparer les props) :\n    if (this.props.fromAddressBar !== prevProps.fromAddressBar) {\n      this.setState({\n        center: this.props.fromAddressBar\n      });\n      this.setState({\n        new: this.props.fromAddressBar\n      });\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(Map, {\n      center: this.state.center,\n      zoom: this.state.zoom,\n      onClick: this.addMarker,\n      ref: ref => {\n        this.map = ref;\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 4\n      }\n    }, this.props.items.map((pin, i) => /*#__PURE__*/React.createElement(Marker, {\n      key: i,\n      position: [pin.lat, pin.lon],\n      onClick: () => {\n        const zoomValue = this.map && this.map.leafletElement.getZoom();\n        this.setState({\n          zoom: zoomValue\n        });\n        this.setState({\n          activePark: pin\n        });\n        this.props.getItemIndex(this.state.activePark.id);\n        this.setState({\n          center: [pin.lat, pin.lon]\n        });\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 6\n      }\n    })), this.state.activePark && /*#__PURE__*/React.createElement(Popup, {\n      className: \"Popup\",\n      position: [this.state.activePark.lat, this.state.activePark.lon],\n      onClose: () => {\n        this.setState({\n          activePark: null\n        });\n        this.props.getItemIndex(null);\n        this.setState({\n          modifyPopup: null\n        });\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 6\n      }\n    }, this.state.modifyPopup ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"Popup-modify\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 8\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"Popup-modify-header\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 10\n      }\n    }, \"Modifier: \"), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 10\n      }\n    }, this.state.modifyName)), /*#__PURE__*/React.createElement(\"hr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"form\", {\n      className: \"Popup-temp-adding-form\",\n      onSubmit: this.handleModify,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      for: \"modifyName\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 10\n      }\n    }, \"Nom de balise\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      name: \"modifyName\",\n      placeholder: this.state.modifyName,\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 10\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"Popup-temp-adding-form-geo\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 10\n      }\n    }, /*#__PURE__*/React.createElement(\"h3\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 11\n      }\n    }, \"G\\xE9o : \"), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 11\n      }\n    }, this.state.activePark.lat, \", \", this.state.activePark.lon)), /*#__PURE__*/React.createElement(\"label\", {\n      for: \"modifDescription\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 10\n      }\n    }, \"Description de la balise\"), /*#__PURE__*/React.createElement(\"textarea\", {\n      name: \"modifyDescription\",\n      placeholder: this.state.modifyDescription,\n      rows: 6,\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 10\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"Popup-modify-options\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 10\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"Popup-modify-options-button-delete\",\n      onClick: this.handleDelete,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 11\n      }\n    }, \"SUPPRIMER\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"submit\",\n      value: \"MODIFIER\",\n      className: \"Popup-temp-adding-form-submit\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 11\n      }\n    })))) : /*#__PURE__*/React.createElement(\"div\", {\n      className: \"Popup-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 8\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"Popup-container-header\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 10\n      }\n    }, this.state.activePark.name, \": \"), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 10\n      }\n    }, \"balise num\\xE9ro:\", this.state.activePark.id)), /*#__PURE__*/React.createElement(\"hr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"Popup-container-geo\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"h3\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 10\n      }\n    }, \"G\\xE9o:\"), /*#__PURE__*/React.createElement(\"h4\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 10\n      }\n    }, this.state.activePark.lat, \", \", this.state.activePark.lon)), /*#__PURE__*/React.createElement(\"hr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"Popup-container-description\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 10\n      }\n    }, this.state.activePark.description)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"Popup-container-options\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"submit\",\n      value: \"MODIFIER ?\",\n      onClick: this.modifyMarker,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 10\n      }\n    })))), this.state.new && /*#__PURE__*/React.createElement(Marker, {\n      key: \"new\",\n      position: this.state.new,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 7\n      }\n    }), this.state.new && /*#__PURE__*/React.createElement(Popup, {\n      className: \"Popup\",\n      position: this.state.new,\n      onClose: () => {\n        this.setState({\n          new: null\n        });\n        this.setState({\n          savePopup: null\n        });\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 7\n      }\n    }, this.state.savePopup ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"Popup-temp-adding\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 10\n      }\n    }, \"Ajouter: beacon\"), /*#__PURE__*/React.createElement(\"hr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 236,\n        columnNumber: 10\n      }\n    }), /*#__PURE__*/React.createElement(\"form\", {\n      className: \"Popup-temp-adding-form\",\n      onSubmit: this.handleSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 237,\n        columnNumber: 10\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      for: \"newName\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 11\n      }\n    }, \"Nom de balise\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      name: \"newName\",\n      id: \"name\",\n      placeholder: \"Nom de balise\",\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 239,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"Popup-temp-adding-form-geo\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 240,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"h3\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 241,\n        columnNumber: 12\n      }\n    }, \"G\\xE9o : \"), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 12\n      }\n    }, this.state.new[0], \", \", this.state.new[1])), /*#__PURE__*/React.createElement(\"label\", {\n      for: \"newDescription\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 11\n      }\n    }, \"Description de la balise\"), /*#__PURE__*/React.createElement(\"textarea\", {\n      name: \"newDescription\",\n      id: \"description\",\n      placeholder: \"Description de la balise\",\n      rows: 6,\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 245,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"submit\",\n      value: \"ENREGISTRER\",\n      className: \"Popup-temp-adding-form-submit\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 246,\n        columnNumber: 11\n      }\n    }))) : /*#__PURE__*/React.createElement(\"div\", {\n      className: \"Popup-temp\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 250,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"h3\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 251,\n        columnNumber: 10\n      }\n    }, \"Position\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"submit\",\n      value: \"AJOUTER ?\",\n      onClick: this.saveMarker,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 252,\n        columnNumber: 10\n      }\n    }))), this.props.satelite ? /*#__PURE__*/React.createElement(TileLayer, {\n      url: \"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}\",\n      attribution: \"Tiles \\xA9 Esri \\u2014 Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 260,\n        columnNumber: 6\n      }\n    }) : /*#__PURE__*/React.createElement(TileLayer, {\n      url: \"http://{s}.tile.openstreetmap.se/hydda/full/{z}/{x}/{y}.png\",\n      attribution: \"\\xA9 <a href=\\\"http://osm.org/copyright\\\">OpenStreetMap</a> contributors\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 265,\n        columnNumber: 6\n      }\n    }));\n  }\n\n}\n\nexport default Leaflet;","map":{"version":3,"sources":["/home/indien/personal_beacon/VirtualBeacon_front/src/components/Leaflet.js"],"names":["React","Map","Marker","Popup","TileLayer","axios","Leaflet","Component","state","center","zoom","activePark","new","modifyPopup","savePopup","newName","newDescription","modifyName","modifyDescription","addMarker","e","props","displayReturn","zoomValue","map","leafletElement","getZoom","setState","latlng","lat","lng","modifyMarker","name","description","saveMarker","handleChange","value","target","handleSubmit","preventDefault","config","headers","Authorization","giveToken","bodyParameters","lon","user_id","post","then","result","status","addItem","alert","catch","handleModify","id","put","getItemIndex","updateItem","handleDelete","delete","removeItem","componentDidUpdate","prevProps","fromAddressBar","render","ref","items","pin","i","satelite"],"mappings":"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","sourcesContent":["\nimport React from \"react\";\nimport { Map, Marker, Popup, TileLayer } from \"react-leaflet\";\n\nimport axios from 'axios';\n\nimport './style/Leaflet.css';\n\nclass Leaflet extends React.Component {\n\n\tstate = {\n\t\tcenter: [48.854730, 2.346803],\n\t\tzoom: 14,\n\t\tactivePark: null,\n\t\tnew: null,\n\t\tmodifyPopup: false,\n\t\tsavePopup: false,\n\t\tnewName: null,\n\t\tnewDescription: null,\n\t\tmodifyName: null,\n\t\tmodifyDescription: null,\n\t}\n\n\taddMarker = (e) => {\n\t\tthis.props.displayReturn();\n\t\tconst zoomValue = this.map && this.map.leafletElement.getZoom();\n\t\tthis.setState({ zoom: zoomValue });\n\t\tthis.setState({ new: [e.latlng.lat, e.latlng.lng] });\n\t\tthis.setState({ center: [e.latlng.lat, e.latlng.lng] });\n\t}\n\n\tmodifyMarker = (e) => {\n\t\tthis.setState({ modifyPopup: true })\n\t\tthis.setState({ modifyName: this.state.activePark.name })\n\t\tthis.setState({ modifyDescription: this.state.activePark.description })\n\t}\n\n\tsaveMarker = (e) => {\n\t\tthis.setState({ savePopup: true })\n\t}\n\n\thandleChange = (e) => {\n\t\tconst value = e.target.value\n\t\tthis.setState({ ...this.state, [e.target.name]: value })\n\t}\n\n\thandleSubmit = (e) => {\n\t\te.preventDefault()\n\n\t\tconst config = {\n\t\t\theaders: { Authorization: `Bearer ${this.props.giveToken}` }\n\t\t};\n\n\t\tconst bodyParameters = {\n\t\t\tlat: this.state.new[0],\n\t\t\tlon: this.state.new[1],\n\t\t\tname: this.state.newName,\n\t\t\tdescription: this.state.newDescription,\n\t\t\tuser_id: 1\n\t\t}\n\n\t\taxios.post(\"http://ec2-18-218-63-27.us-east-2.compute.amazonaws.com:443/api/places/create/position\", bodyParameters, config)\n\t\t\t.then(result => {\n\t\t\t\tif (result.status === 200) {\n\t\t\t\t\tthis.props.addItem(bodyParameters)\n\t\t\t\t\tthis.setState({ savePopup: false, new: null })\n\t\t\t\t\tthis.props.alert(\"Balise ajoutée\")\n\t\t\t\t} else {\n\t\t\t\t\tthis.props.alert(\"Erreur ajout\")\n\t\t\t\t}\n\t\t\t}).catch(e => {\n\t\t\t\tthis.props.alert(\"Erreur ajout\")\n\t\t\t});\n\t}\n\n\thandleModify = (e) => {\n\t\te.preventDefault()\n\t\tconst config = {\n\t\t\theaders: { Authorization: `Bearer ${this.props.giveToken}` }\n\t\t};\n\n\t\tconst bodyParameters = {\n\t\t\tname: this.state.modifyName,\n\t\t\tdescription: this.state.modifyDescription,\n\t\t\tid: this.state.activePark.id\n\t\t}\n\n\t\taxios.put(\"http://ec2-18-218-63-27.us-east-2.compute.amazonaws.com:443/api/places/position\", bodyParameters, config)\n\t\t\t.then(result => {\n\t\t\t\tif (result.status === 200) {\n\t\t\t\t\tthis.setState({ modifyPopup: false, activePark: null })\n\t\t\t\t\tthis.props.getItemIndex(null)\n\t\t\t\t\tthis.props.updateItem()\n\t\t\t\t\tthis.props.alert(\"Modification effectuée\")\n\t\t\t\t} else {\n\t\t\t\t\tthis.props.alert(\"Erreur modification\")\n\t\t\t\t}\n\t\t\t}).catch(e => {\n\t\t\t\tthis.props.alert(\"Erreur modification\")\n\t\t\t});\n\t}\n\n\thandleDelete = (e) => {\n\t\te.preventDefault()\n\t\tconst id = this.state.activePark.id\n\t\tconst config = {\n\t\t\theaders: { Authorization: `Bearer ${this.props.giveToken}` }\n\t\t};\n\t\taxios.delete(`http://ec2-18-218-63-27.us-east-2.compute.amazonaws.com:443/api/places/delete/${id}`, config)\n\t\t\t.then(result => {\n\t\t\t\tif (result.status === 204) {\n\t\t\t\t\tthis.setState({ modifyPopup: false, activePark: null })\n\t\t\t\t\tthis.props.getItemIndex(null)\n\t\t\t\t\tthis.props.removeItem(id)\n\t\t\t\t\tthis.props.alert(\"Suppression effectuée\")\n\t\t\t\t} else {\n\t\t\t\t\tthis.props.alert(\"Erreur suppression\")\n\t\t\t\t}\n\t\t\t}).catch(e => {\n\t\t\t\tthis.props.alert(\"Erreur suppression\")\n\t\t\t});\n\t}\n\n\tcomponentDidUpdate(prevProps) {\n\t\t// Utilisation classique (pensez bien à comparer les props) :\n\t\tif (this.props.fromAddressBar !== prevProps.fromAddressBar) {\n\t\t\tthis.setState({ center: this.props.fromAddressBar });\n\t\t\tthis.setState({ new: this.props.fromAddressBar });\n\t\t}\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<Map center={this.state.center} zoom={this.state.zoom} onClick={this.addMarker} ref={(ref) => { this.map = ref }}\t>\n\n\t\t\t\t{/* Fixed pin */}\n\t\t\t\t{this.props.items.map((pin, i) => (\n\t\t\t\t\t<Marker\n\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\tposition={[\n\t\t\t\t\t\t\tpin.lat,\n\t\t\t\t\t\t\tpin.lon\n\t\t\t\t\t\t]}\n\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\tconst zoomValue = this.map && this.map.leafletElement.getZoom();\n\t\t\t\t\t\t\tthis.setState({ zoom: zoomValue });\n\t\t\t\t\t\t\tthis.setState({ activePark: pin })\n\t\t\t\t\t\t\tthis.props.getItemIndex(this.state.activePark.id)\n\t\t\t\t\t\t\tthis.setState({ center: [pin.lat, pin.lon] })\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t))}\n\n\t\t\t\t{/* Fixed pin pop up */}\n\t\t\t\t{this.state.activePark && (\n\t\t\t\t\t<Popup className=\"Popup\"\n\t\t\t\t\t\tposition={[\n\t\t\t\t\t\t\tthis.state.activePark.lat,\n\t\t\t\t\t\t\tthis.state.activePark.lon\n\t\t\t\t\t\t]}\n\t\t\t\t\t\tonClose={() => {\n\t\t\t\t\t\t\tthis.setState({ activePark: null });\n\t\t\t\t\t\t\tthis.props.getItemIndex(null);\n\t\t\t\t\t\t\tthis.setState({ modifyPopup: null });\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t{this.state.modifyPopup ?\n\t\t\t\t\t\t\t<div className=\"Popup-modify\">\n\t\t\t\t\t\t\t\t<div className=\"Popup-modify-header\">\n\t\t\t\t\t\t\t\t\t<h2>Modifier: </h2>\n\t\t\t\t\t\t\t\t\t<p>{this.state.modifyName}</p>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<hr />\n\t\t\t\t\t\t\t\t<form className=\"Popup-temp-adding-form\" onSubmit={this.handleModify}>\n\t\t\t\t\t\t\t\t\t<label for=\"modifyName\">Nom de balise</label>\n\t\t\t\t\t\t\t\t\t<input type=\"text\" name=\"modifyName\" placeholder={this.state.modifyName} onChange={this.handleChange} />\n\t\t\t\t\t\t\t\t\t<div className=\"Popup-temp-adding-form-geo\">\n\t\t\t\t\t\t\t\t\t\t<h3>Géo : </h3>\n\t\t\t\t\t\t\t\t\t\t<p>{this.state.activePark.lat}, {this.state.activePark.lon}</p>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<label for=\"modifDescription\">Description de la balise</label>\n\t\t\t\t\t\t\t\t\t<textarea name=\"modifyDescription\" placeholder={this.state.modifyDescription} rows={6} onChange={this.handleChange} />\n\t\t\t\t\t\t\t\t\t<div className=\"Popup-modify-options\">\n\t\t\t\t\t\t\t\t\t\t<button className=\"Popup-modify-options-button-delete\" onClick={this.handleDelete}>SUPPRIMER</button>\n\t\t\t\t\t\t\t\t\t\t<input type=\"submit\" value=\"MODIFIER\" className=\"Popup-temp-adding-form-submit\" />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</form>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t<div className=\"Popup-container\">\n\t\t\t\t\t\t\t\t<div className=\"Popup-container-header\">\n\t\t\t\t\t\t\t\t\t<h2>{this.state.activePark.name}: </h2>\n\t\t\t\t\t\t\t\t\t<p>balise numéro:{this.state.activePark.id}</p>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<hr />\n\t\t\t\t\t\t\t\t<div className=\"Popup-container-geo\">\n\t\t\t\t\t\t\t\t\t<h3>Géo:</h3>\n\t\t\t\t\t\t\t\t\t<h4>{this.state.activePark.lat}, {this.state.activePark.lon}</h4>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<hr />\n\t\t\t\t\t\t\t\t<div className=\"Popup-container-description\">\n\t\t\t\t\t\t\t\t\t<p>{this.state.activePark.description}</p>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className=\"Popup-container-options\">\n\t\t\t\t\t\t\t\t\t<input type=\"submit\" value=\"MODIFIER ?\" onClick={this.modifyMarker} />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>}\n\t\t\t\t\t</Popup >\n\t\t\t\t)\n\t\t\t\t}\n\n\t\t\t\t{/* Temp pin */}\n\t\t\t\t{\n\t\t\t\t\tthis.state.new && (\n\t\t\t\t\t\t<Marker\n\t\t\t\t\t\t\tkey=\"new\"\n\t\t\t\t\t\t\tposition={this.state.new}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)\n\t\t\t\t}\n\n\t\t\t\t{/* Temp pin pop up */}\n\t\t\t\t{\n\t\t\t\t\tthis.state.new && (\n\t\t\t\t\t\t<Popup\n\t\t\t\t\t\t\tclassName=\"Popup\"\n\t\t\t\t\t\t\tposition={this.state.new}\n\t\t\t\t\t\t\tonClose={() => {\n\t\t\t\t\t\t\t\tthis.setState({ new: null });\n\t\t\t\t\t\t\t\tthis.setState({ savePopup: null })\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{this.state.savePopup ?\n\t\t\t\t\t\t\t\t<div className=\"Popup-temp-adding\">\n\t\t\t\t\t\t\t\t\t<h2>Ajouter: beacon</h2>\n\t\t\t\t\t\t\t\t\t<hr />\n\t\t\t\t\t\t\t\t\t<form className=\"Popup-temp-adding-form\" onSubmit={this.handleSubmit}>\n\t\t\t\t\t\t\t\t\t\t<label for=\"newName\">Nom de balise</label>\n\t\t\t\t\t\t\t\t\t\t<input type=\"text\" name=\"newName\" id=\"name\" placeholder=\"Nom de balise\" onChange={this.handleChange} />\n\t\t\t\t\t\t\t\t\t\t<div className=\"Popup-temp-adding-form-geo\">\n\t\t\t\t\t\t\t\t\t\t\t<h3>Géo : </h3>\n\t\t\t\t\t\t\t\t\t\t\t<p>{this.state.new[0]}, {this.state.new[1]}</p>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<label for=\"newDescription\">Description de la balise</label>\n\t\t\t\t\t\t\t\t\t\t<textarea name=\"newDescription\" id=\"description\" placeholder=\"Description de la balise\" rows={6} onChange={this.handleChange} />\n\t\t\t\t\t\t\t\t\t\t<input type=\"submit\" value=\"ENREGISTRER\" className=\"Popup-temp-adding-form-submit\" />\n\t\t\t\t\t\t\t\t\t</form>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t<div className=\"Popup-temp\">\n\t\t\t\t\t\t\t\t\t<h3>Position</h3>\n\t\t\t\t\t\t\t\t\t<input type=\"submit\" value=\"AJOUTER ?\" onClick={this.saveMarker} />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t</Popup>\n\t\t\t\t\t)\n\t\t\t\t}\n\n\t\t\t\t{this.props.satelite ?\n\t\t\t\t\t<TileLayer\n\t\t\t\t\t\turl=\"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}\"\n\t\t\t\t\t\tattribution='Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community'\n\t\t\t\t\t/>\n\t\t\t\t\t:\n\t\t\t\t\t<TileLayer\n\t\t\t\t\t\turl=\"http://{s}.tile.openstreetmap.se/hydda/full/{z}/{x}/{y}.png\"\n\t\t\t\t\t\tattribution='&copy; <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\n\t\t\t\t\t/>\n\t\t\t\t}\n\t\t\t</Map >\n\t\t);\n\t}\n}\n\nexport default Leaflet\n\n"]},"metadata":{},"sourceType":"module"}